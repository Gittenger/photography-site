<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="main.css" />
    <title>Photographer Site</title>
  </head>
  <body>
    <div class="container">
      <div class="grid"></div>
    </div>

    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="imgIndex.js"></script>
    <script>
      var msnry = new Masonry(".grid", {
        // options
        itemSelector: ".grid-item",
        columnWidth: 200
      });

      (function() {
        const grid = document.querySelector(".grid");

        (function createNodes() {
          function createNode(i) {
            const imgNode = document.createElement("img");
            imgNode.setAttribute("src", photos[i - 1].url);
            return imgNode;
          }

          for (let i = 1; i <= 20; i++) {
            const node = createNode(i);
            node.classList.add("grid-item");
            node.classList.add(`grid-item--${i}`);
            grid.appendChild(node);
          }
        })();

        (function setHeights() {
          const gridItems = grid.querySelectorAll(".grid-item");

          const height2 = Array.from(gridItems).filter(
            item =>
              item.classList.contains("grid-item--1") ||
              item.classList.contains("grid-item--4") ||
              item.classList.contains("grid-item--6") ||
              item.classList.contains("grid-item--13")
          );

          const height3 = Array.from(gridItems).filter(
            item =>
              item.classList.contains("grid-item--2") ||
              item.classList.contains("grid-item--3") ||
              item.classList.contains("grid-item--11") ||
              item.classList.contains("grid-item--20")
          );

          const height4 = Array.from(gridItems).filter(
            item =>
              item.classList.contains("grid-item--5") ||
              item.classList.contains("grid-item--7") ||
              item.classList.contains("grid-item--8") ||
              item.classList.contains("grid-item--17")
          );
          height2.forEach(item => item.classList.add("grid-item--height2"));
          height3.forEach(item => item.classList.add("grid-item--height3"));
          height4.forEach(item => item.classList.add("grid-item--height4"));
        })();
      })();
    </script>
  </body>
</html>
